<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Browsing Declarations and Types :: Jandex documentation</title>
    <link rel="prev" href="getting.html">
    <link rel="next" href="indexing.html">
    <meta name="generator" content="Antora 3.0.3">
    <link rel="stylesheet" href="../../../_/css/site.css">
    <script>var uiRootPath = '../../../_'</script>
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <button class="nav-toggle"></button>

      <a class="navbar-item title" href="../index.html">Jandex</a>

      <div class="navbar-item has-dropdown is-hoverable">
        <span class="navbar-link">3.0.3</span>
        <div class="navbar-dropdown navbar-menu">
            <a class="navbar-item " href="../../3.1.6/index.html">3.1.6</a>
            <a class="navbar-item " href="../../3.1.5/index.html">3.1.5</a>
            <a class="navbar-item " href="../../3.1.3/index.html">3.1.3</a>
            <a class="navbar-item " href="../../3.1.2/index.html">3.1.2</a>
            <a class="navbar-item " href="../../3.1.1/index.html">3.1.1</a>
            <a class="navbar-item " href="../../3.1.0/index.html">3.1.0</a>
            <a class="navbar-item " href="../../3.0.6/index.html">3.0.6</a>
            <a class="navbar-item " href="../../3.0.5/index.html">3.0.5</a>
            <a class="navbar-item " href="../../3.0.4/index.html">3.0.4</a>
            <a class="navbar-item  is-current" href="../index.html">3.0.3</a>
            <a class="navbar-item " href="../../3.0.2/index.html">3.0.2</a>
            <a class="navbar-item " href="../../3.0.1/index.html">3.0.1</a>
            <a class="navbar-item " href="../../3.0.0/index.html">3.0.0</a>
        </div>
      </div>


      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>

    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">

        <a class="navbar-item" href="https://smallrye.io/">SmallRye.io main website</a>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="jandex" data-version="3.0.3">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
<ul class="nav-list nav-list-level-0">
  <li class="nav-item nav-item-level-0">
<ul class="nav-list nav-list-level-1">
  <li class="nav-item nav-item-level-1">
    <a class="nav-link" href="../index.html">Introduction</a>
  </li>
  <li class="nav-item nav-item-level-1">
    <span class="nav-text">Jandex</span>
<ul class="nav-list nav-list-level-2">
  <li class="nav-item nav-item-level-2">
    <a class="nav-link" href="getting.html">Getting Jandex</a>
  </li>
  <li class="nav-item nav-item-level-2 is-current-page">
    <a class="nav-link" href="browsing.html">Browsing Declarations and Types</a>
  </li>
  <li class="nav-item nav-item-level-2">
    <a class="nav-link" href="indexing.html">Indexing Classes</a>
  </li>
</ul>
  </li>
  <li class="nav-item nav-item-level-1">
    <span class="nav-text">Jandex Maven Plugin</span>
<ul class="nav-list nav-list-level-2">
  <li class="nav-item nav-item-level-2">
    <a class="nav-link" href="../maven/basic.html">Basic Usage</a>
  </li>
  <li class="nav-item nav-item-level-2">
    <a class="nav-link" href="../maven/advanced.html">Advanced Usage</a>
  </li>
  <li class="nav-item nav-item-level-2">
    <a class="nav-link" href="../maven/shading.html">Usage with Shading</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
    </div>
  </aside>
</div>
<main class="article">
  <div class="content">
<aside class="toc sidebar" data-title="Table of contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
  <a href="https://github.com/smallrye/jandex/blob/3.0.3/doc/modules/ROOT/pages/core/browsing.adoc" class="edit-this-page" title="Edit this page">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25Z"/></svg>
  </a>
<h1 class="page">Browsing Declarations and Types</h1>
<div class="sect1">
<h2 id="_browsing_a_class"><a class="anchor" href="#_browsing_a_class"></a>Browsing a Class</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The following example demonstrates indexing a class and browsing its methods:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">Index index = Index.of(Map.class);

ClassInfo clazz = index.getClassByName(DotName.createSimple("java.util.Map"));

for (MethodInfo method : clazz.methods()) {
    System.out.println(method);
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_searching_for_annotations"><a class="anchor" href="#_searching_for_annotations"></a>Searching for Annotations</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The following example demonstrates indexing the <code>Thread</code> and <code>String</code> classes, and searching for methods that have been marked with <code>@Deprecated</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">Indexer indexer = new Indexer();
indexer.indexClass(Thread.class);
indexer.indexClass(String.class);
Index index = indexer.complete();

DotName deprecated = DotName.createSimple("java.lang.Deprecated");
List&lt;AnnotationInstance&gt; annotations = index.getAnnotations(deprecated);

for (AnnotationInstance annotation : annotations) {
    switch (annotation.target().kind()) {
        case METHOD:
            System.out.println(annotation.target());
            break;
    }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_analyzing_generics"><a class="anchor" href="#_analyzing_generics"></a>Analyzing Generics</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The following example demonstrates indexing the <code>Collections</code> class and printing the resolved bound on the <code>List&lt;T&gt;</code> method parameter, which resolves to <code>Comparable</code> from the method type parameter.</p>
</div>
<div class="paragraph">
<p>The <code>sort()</code> method analyzed by the example is defined in source as:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public static &lt;T extends Comparable&lt;? super T&gt;&gt; void sort(List&lt;T&gt; list)</code></pre>
</div>
</div>
<div class="paragraph">
<p>The example code, which prints <code>Comparable&lt;? super T&gt;</code> followed by <code>T</code>, is:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">Index index = Index.of(Collections.class);

ClassInfo clazz = index.getClassByName(DotName.createSimple("java.util.Collections"));
Type listType = Type.create(DotName.createSimple("java.util.List"), Type.Kind.CLASS);
MethodInfo sort = clazz.method("sort", listType);

Type t = sort.parameterTypes().get(0).asParameterizedType() // List&lt;T extends Comparable&lt;? super T&gt;&gt;
             .arguments().get(0).asTypeVariable()           // T extends Comparable&lt;? super T&gt;
             .bounds().get(0);                              // Comparable&lt;? super T&gt;

System.out.println(t);

Type b = t.asParameterizedType()               // Comparable&lt;? super T&gt;
          .arguments().get(0).asWildcardType() // ? super T
          .superBound();                       // T

System.out.println(b);</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_browsing_type_annotations"><a class="anchor" href="#_browsing_type_annotations"></a>Browsing Type Annotations</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Consider a declaration with complex nested generic type which contains a <code>@Label</code> annotation:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">Map&lt;Integer, List&lt;@Label("Name") String&gt;&gt; names;</code></pre>
</div>
</div>
<div class="paragraph">
<p>The following code will print <code>Name</code>, the annotation value associated with the type:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">Indexer indexer = new Indexer();
indexer.indexClass(Test.class);
indexer.indexClass(Test.Label.class);
Index index = indexer.complete();

FieldInfo field = index.getClassByName(Test.class).field("names");
System.out.println(
        field.type().asParameterizedType()                // Map&lt;Integer, List&lt;@Label("Name") String&gt;&gt;
                .arguments().get(1).asParameterizedType() // List&lt;@Label("Name") String&gt;
                .arguments().get(0)                       // @Label("Name") String
                .annotations().get(0)                     // @Label("Name")
                .value().asString()                       // "Name"
);</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_searching_for_type_annotations"><a class="anchor" href="#_searching_for_type_annotations"></a>Searching for Type Annotations</h2>
<div class="sectionbody">
<div class="paragraph">
<p>A type annotation can also be located by searching for the annotation.
The target for a found type annotation is represented as a <code>TypeTarget</code>.
The <code>TypeTarget</code> provides a reference to the annotated type, as well as the enclosing target that contains the type.
The target itself can be a method, a class, or a field.
The usage of that target can be a number of places, including parameters, return types, type parameters, type arguments, class extends values, type bounds and receiver types.
Subclasses of <code>TypeTarget</code> provide the necessary information to locate the starting point of the usage.</p>
</div>
<div class="paragraph">
<p>Since the particular type use can occur at any depth, the relevant branch of the type tree constrained by the above starting point must be traversed to understand the context of the use.</p>
</div>
<div class="paragraph">
<p>Consider a declaration with complex nested generic type which contains a <code>@Label</code> annotation:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">Map&lt;Integer, List&lt;@Label("Name") String&gt;&gt; names;</code></pre>
</div>
</div>
<div class="paragraph">
<p>The following code locates a type annotation and then inspects its location:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">Indexer indexer = new Indexer();
indexer.indexClass(Test.class);
indexer.indexClass(Test.Label.class);
Index index = indexer.complete();

DotName label = DotName.createSimple("Test$Label");
List&lt;AnnotationInstance&gt; annotations = index.getAnnotations(label);
for (AnnotationInstance annotation : annotations) {
    if (annotation.target().kind() == AnnotationTarget.Kind.TYPE) {
        TypeTarget typeTarget = annotation.target().asType();
        System.out.println("Type usage is located within: " + typeTarget.enclosingTarget());
        System.out.println("Usage type: " + typeTarget.usage());
        System.out.println("Target type: " + typeTarget.target());
        System.out.println("Expected target? " + (typeTarget.enclosingTarget().asField().type()
                .asParameterizedType().arguments().get(1)
                .asParameterizedType().arguments().get(0)
                == typeTarget.target()));
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The output is:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">Type usage is located within: java.util.Map&lt;java.lang.Integer, java.util.List&lt;java.lang.@Label("Name") String&gt;&gt; Test.names
Usage type: EMPTY
Target type: java.lang.@Label("Name") String
Expected target? true</code></pre>
</div>
</div>
</div>
</div>
<nav class="pagination">
  <span class="prev"><a href="getting.html">Getting Jandex</a></span>
  <span class="next"><a href="indexing.html">Indexing Classes</a></span>
</nav>
</article>
  </div>
</main>
</div>
<footer class="footer">
  <p>
    Sponsored by <a href="https://www.redhat.com"><img style="vertical-align: middle; height: 2.5em;" src="../../../_/img/redhat.svg" alt="Red Hat"></a>
  </p>
  <p>
    Made with <a href="https://github.com/smallrye/smallrye-antora-ui">SmallRye Antora UI</a>, which is licensed under the MPL-2.0 license.
    Includes portions of <a href="https://squidfunk.github.io/mkdocs-material/">Material for MkDocs</a>, which is licensed under the MIT license.
  </p>
</footer>
<script src="../../../_/js/site.js"></script>
<script async src="../../../_/js/vendor/highlight.js"></script>
  </body>
</html>
